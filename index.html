<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANSFAL - Association pour la Coopération, le Développement et l'Environnement</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ==================== VARIABLES ET RESET ==================== */
        :root {
            --primary: #1a6d2c;
            --secondary: #2e8b57;
            --accent: #3cb371;
            --light: #f0f9f3;
            --dark: #145a32;
            --text: #333333;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --admin: #ff9800;
            --webmaster: #9c27b0;
            --whatsapp: #25D366;
            --warning: #ff9800;
            --success: #4caf50;
            --danger: #f44336;
            --info: #2196F3;
            --dashboard-bg: #f5f5f5;
            --card-bg: #ffffff;
            --sidebar-bg: #2c3e50;
            --sidebar-text: #ecf0f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--white);
            transition: all 0.3s ease;
            padding-top: 40px;
        }

        h1, h2, h3, h4 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ==================== COMPTEUR VISITEURS ==================== */
        .visitor-counter {
            background-color: var(--info);
            color: white;
            padding: 8px 0;
            font-size: 0.85rem;
            text-align: center;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .visitor-counter .container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .visitor-count {
            font-weight: bold;
            background: rgba(255,255,255,0.2);
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        /* ==================== LANGUAGE SWITCHER ==================== */
        .language-switcher {
            position: fixed;
            top: 45px;
            right: 15px;
            z-index: 1001;
            display: flex;
            gap: 5px;
        }

        .lang-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lang-btn.active {
            background-color: var(--dark);
        }

        .lang-btn:hover {
            background-color: var(--secondary);
        }

        /* ==================== BARRE D'AUTHENTIFICATION ==================== */
        .auth-bar {
            position: fixed;
            top: 40px;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, var(--sidebar-bg), #4a6491);
            color: var(--sidebar-text);
            padding: 12px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .auth-form {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .auth-form input {
            padding: 8px 15px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 14px;
        }

        .auth-form input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .auth-form button {
            background: var(--success);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .auth-form button:hover {
            background: #219653;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-name {
            font-weight: bold;
            color: var(--sidebar-text);
        }

        .user-role {
            background: var(--primary);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: #c0392b;
        }

        .hidden {
            display: none !important;
        }

        /* ==================== HEADER ==================== */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: fixed;
            width: 100%;
            top: 95px;
            z-index: 998;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--primary);
        }

        .logo-text h1 {
            font-size: 1.5rem;
            margin-bottom: 0;
            color: var(--primary);
        }

        .logo-text p {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-top: -5px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: color 0.3s;
            padding: 5px 0;
            position: relative;
        }

        nav a:hover {
            color: var(--primary);
        }

        nav a.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }

        nav a:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary);
            transition: width 0.3s;
        }

        nav a:hover:after {
            width: 100%;
        }

        /* ==================== HERO SECTION ==================== */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            color: var(--white);
            text-align: center;
            padding: 180px 0 100px;
            margin-top: 95px;
        }

        .hero h2 {
            font-size: 3rem;
            color: var(--white);
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        .btn {
            display: inline-block;
            background-color: var(--accent);
            color: var(--white);
            padding: 12px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            border: 2px solid var(--accent);
        }

        .btn:hover {
            background-color: transparent;
            color: var(--accent);
        }

        /* ==================== SECTIONS ==================== */
        section {
            padding: 80px 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-title {
            position: relative;
            display: inline-block;
            padding-bottom: 15px;
        }

        .section-title h2 {
            font-size: 2.5rem;
        }

        .section-title h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--accent);
        }

        /* ==================== DASHBOARD SECTION ==================== */
        .dashboard-section {
            display: none;
            background-color: var(--dashboard-bg);
            min-height: 100vh;
            padding-top: 95px;
        }

        .dashboard-section.active {
            display: block;
        }

        .dashboard-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
            min-height: calc(100vh - 95px);
        }

        /* Sidebar */
        .dashboard-sidebar {
            background: var(--sidebar-bg);
            color: var(--sidebar-text);
            padding: 30px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 5px;
        }

        .sidebar-menu a {
            display: block;
            padding: 15px 30px;
            color: var(--sidebar-text);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .sidebar-menu a:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: var(--accent);
        }

        .sidebar-menu a.active {
            background: rgba(255,255,255,0.15);
            border-left-color: var(--accent);
            font-weight: bold;
        }

        .sidebar-menu i {
            width: 20px;
            margin-right: 10px;
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: 30px;
            background: var(--white);
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .page-title {
            color: var(--dark);
            font-size: 28px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent);
        }

        /* Statistiques */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--light);
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid var(--primary);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            margin: 0 0 15px 0;
            color: var(--dark);
            font-size: 18px;
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: var(--primary);
        }

        /* Cartes de contenu */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .content-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            position: relative;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #eee;
        }

        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.12);
        }

        .content-card h3 {
            color: var(--dark);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .content-card p {
            color: var(--text);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* Boutons d'action */
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-action {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-edit {
            background: var(--info);
            color: white;
        }

        .btn-delete {
            background: var(--danger);
            color: white;
        }

        .btn-add {
            background: linear-gradient(135deg, var(--success), #2ecc71);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            bottom: 20px;
            display: none;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(39, 174, 96, 0.3);
        }

        .btn-add:hover {
            background: linear-gradient(135deg, #219653, #27ae60);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .authenticated .btn-add {
            display: block;
        }

        /* ==================== À PROPOS ==================== */
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .about-img {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .about-img img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s;
        }

        .about-img:hover img {
            transform: scale(1.05);
        }

        /* ==================== GALERIE ==================== */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .gallery-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            aspect-ratio: 4/3;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .gallery-item:hover img {
            transform: scale(1.05);
        }

        /* ==================== VIDÉOS ==================== */
        .video-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .video-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            aspect-ratio: 16/9;
        }

        .youtube-embed {
            position: relative;
            width: 100%;
            height: 100%;
            padding-bottom: 56.25%;
            overflow: hidden;
            background: #000;
        }

        .youtube-embed iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* ==================== PROJETS ==================== */
        .projects-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .project-card {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .project-card:hover {
            transform: translateY(-10px);
        }

        .project-img {
            height: 200px;
            overflow: hidden;
        }

        .project-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .project-card:hover .project-img img {
            transform: scale(1.1);
        }

        .project-info {
            padding: 25px;
            background-color: var(--white);
        }

        /* ==================== PUBLICATIONS ==================== */
        .publications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .publication-card {
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .publication-card:hover {
            transform: translateY(-5px);
        }

        .publication-header {
            padding: 20px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .publication-type {
            background: rgba(255, 255, 255, 0.2);
            padding: 3px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .publication-date {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .publication-content {
            padding: 20px;
        }

        .publication-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--dark);
            font-weight: 600;
        }

        .publication-description {
            color: var(--text);
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .publication-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-view, .btn-download {
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .btn-view {
            background-color: var(--info);
            color: white;
        }

        .btn-download {
            background-color: var(--success);
            color: white;
        }

        .btn-view:hover, .btn-download:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* ==================== COMMENTAIRES ==================== */
        .comment-form {
            background: var(--white);
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .comment-form input,
        .comment-form textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .comment-form textarea {
            min-height: 120px;
            resize: vertical;
        }

        .comment-item {
            background: var(--white);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--accent);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .comment-author {
            font-weight: bold;
            color: var(--primary);
        }

        .comment-date {
            font-size: 0.9rem;
            color: #666;
        }

        .comment-content {
            color: var(--text);
            line-height: 1.6;
        }

        .no-comments {
            text-align: center;
            padding: 40px;
            color: #666;
            font-style: italic;
        }

        /* ==================== CONTACT ==================== */
        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .contact-item {
            text-align: center;
            padding: 20px;
            background: var(--light);
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .contact-item:hover {
            transform: translateY(-5px);
        }

        .contact-item i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        /* ==================== FOOTER ==================== */
        footer {
            background-color: var(--dark);
            color: var(--white);
            padding: 60px 0 30px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .social-icons {
            display: flex;
            gap: 15px;
        }

        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--white);
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .social-icons a:hover {
            background-color: var(--accent);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ==================== PANELS ADMIN/WEBMASTER ==================== */
        .admin-overlay, .webmaster-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .admin-overlay.active, .webmaster-overlay.active {
            display: flex;
        }

        .admin-panel, .webmaster-panel {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
        }

        .admin-panel h3, .webmaster-panel h3 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .admin-buttons, .webmaster-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .admin-btn, .webmaster-btn {
            background-color: var(--dark);
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .admin-btn:hover, .webmaster-btn:hover {
            background-color: var(--primary);
            transform: translateX(5px);
        }

        /* ==================== BOUTONS FLOTTANTS ==================== */
        .whatsapp-float {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background-color: var(--whatsapp);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(37, 211, 102, 0.4);
        }

        .login-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--admin);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .webmaster-btn-float {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--webmaster);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .comments-btn {
            position: fixed;
            bottom: 140px;
            right: 20px;
            background-color: var(--info);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .media-library-btn {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            display: none;
        }

        .media-library-btn.active {
            display: flex;
        }

        .comments-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ==================== CONTENU ÉDITABLE ==================== */
        .edit-btn, .image-edit-btn, .add-section-btn, .add-item-btn, .remove-item-btn {
            position: absolute;
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            z-index: 100;
            box-shadow: var(--shadow);
            transition: all 0.3s;
        }

        .edit-btn {
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
        }

        .image-edit-btn {
            top: 10px;
            left: 10px;
            width: 35px;
            height: 35px;
        }

        .add-section-btn {
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
        }

        .add-item-btn {
            bottom: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
        }

        .remove-item-btn {
            bottom: 10px;
            left: 10px;
            width: 35px;
            height: 35px;
            background-color: var(--danger);
        }

        .editable:hover .edit-btn,
        .image-editable:hover .image-edit-btn,
        .section-header:hover .add-section-btn,
        .gallery-item:hover .add-item-btn,
        .video-item:hover .add-item-btn,
        .project-card:hover .add-item-btn,
        .publication-card:hover .add-item-btn,
        .gallery-item:hover .remove-item-btn,
        .video-item:hover .remove-item-btn,
        .project-card:hover .remove-item-btn,
        .publication-card:hover .remove-item-btn {
            display: flex;
        }

        .edit-btn:hover,
        .image-edit-btn:hover,
        .add-section-btn:hover,
        .add-item-btn:hover {
            background-color: var(--secondary);
            transform: scale(1.1);
        }

        .remove-item-btn:hover {
            background-color: #d32f2f;
            transform: scale(1.1);
        }

        /* ==================== BOUTON AJOUT GLOBAL ==================== */
        .btn-add-float {
            position: fixed;
            bottom: 180px;
            right: 20px;
            background: linear-gradient(135deg, var(--success), #2ecc71);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 3px 10px rgba(39, 174, 96, 0.3);
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .btn-add-float.active {
            display: flex;
        }

        .btn-add-float:hover {
            background: linear-gradient(135deg, #219653, #27ae60);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .add-menu {
            position: fixed;
            bottom: 240px;
            right: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 2000;
            padding: 10px;
            min-width: 200px;
        }

        .add-menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            padding: 10px 15px;
            border: none;
            background: none;
            cursor: pointer;
            text-align: left;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .add-menu-item:hover {
            background: #f0f9f3;
        }

        /* ==================== MODALE DE TÉLÉVERSEMENT ==================== */
        .upload-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }

        .upload-modal.active {
            display: flex;
        }

        .upload-modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .upload-modal h3 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: #f9f9f9;
        }

        .upload-area i {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .upload-area.drag-over {
            border-color: var(--success);
            background: #f0f9f3;
        }

        .file-input {
            display: none;
        }

        .file-preview {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-icon {
            font-size: 20px;
            color: var(--primary);
        }

        .file-name {
            font-weight: 500;
        }

        .file-size {
            font-size: 0.8rem;
            color: #666;
        }

        .remove-file {
            background: var(--danger);
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .upload-progress {
            margin-top: 20px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.3s;
        }

        .upload-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        /* ==================== MESSAGES D'ALERTE ==================== */
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .alert.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .alert.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        /* ==================== MODALES ==================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 768px) {
            .visitor-counter .container {
                flex-direction: column;
                gap: 5px;
            }
            
            .header-container {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .hero {
                padding: 120px 0 60px;
                margin-top: 95px;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .about-content {
                grid-template-columns: 1fr;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .whatsapp-float {
                bottom: 70px;
                right: 15px;
            }
            
            .comments-btn {
                bottom: 130px;
                right: 15px;
            }
            
            .login-btn {
                bottom: 15px;
                right: 15px;
            }
            
            .webmaster-btn-float {
                bottom: 70px;
                left: 15px;
            }
            
            .media-library-btn {
                bottom: 130px;
                left: 15px;
            }
            
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .dashboard-sidebar {
                border-radius: 0;
                padding: 20px 0;
            }
            
            .auth-bar {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
            }
            
            .auth-form {
                flex-direction: column;
                width: 100%;
            }
            
            .auth-form input {
                width: 100%;
            }
            
            .user-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn-add-float {
                bottom: 150px;
                right: 15px;
            }
            
            .add-menu {
                bottom: 210px;
                right: 15px;
            }
        }

        @media (max-width: 480px) {
            .visitor-counter {
                font-size: 0.75rem;
            }
            
            .language-switcher {
                top: 40px;
                right: 10px;
            }
            
            .logo-text h1 {
                font-size: 1.3rem;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ==================== RTL SUPPORT ==================== */
        body.rtl {
            direction: rtl;
            text-align: right;
        }

        body.rtl .logo {
            flex-direction: row-reverse;
        }
        
        body.rtl nav ul {
            flex-direction: row-reverse;
        }
        
        body.rtl .edit-btn {
            left: 10px;
            right: auto;
        }
        
        body.rtl .image-edit-btn {
            right: 10px;
            left: auto;
        }
        
        body.rtl .add-section-btn {
            left: 10px;
            right: auto;
        }
        
        body.rtl .add-item-btn {
            left: 10px;
            right: auto;
        }
        
        body.rtl .remove-item-btn {
            right: 10px;
            left: auto;
        }
        
        body.rtl .language-switcher {
            right: auto;
            left: 15px;
        }
        
        body.rtl .whatsapp-float {
            right: auto;
            left: 20px;
        }
        
        body.rtl .login-btn {
            right: auto;
            left: 20px;
        }
        
        body.rtl .webmaster-btn-float {
            left: auto;
            right: 20px;
        }
        
        body.rtl .media-library-btn {
            left: auto;
            right: 20px;
        }
        
        body.rtl .comments-btn {
            right: auto;
            left: 20px;
        }
        
        body.rtl .btn-add-float {
            right: auto;
            left: 20px;
        }
        
        body.rtl .add-menu {
            right: auto;
            left: 20px;
        }
        
        body.rtl .publication-actions {
            justify-content: flex-start;
        }
        
        body.rtl .stat-card {
            border-left: none;
            border-right: 4px solid var(--primary);
        }
        
        body.rtl .comment-item {
            border-left: none;
            border-right: 4px solid var(--accent);
        }
        
        body.rtl .sidebar-menu a {
            border-left: none;
            border-right: 4px solid transparent;
        }
        
        body.rtl .sidebar-menu a:hover,
        body.rtl .sidebar-menu a.active {
            border-left: none;
            border-right-color: var(--accent);
        }
        
        body.rtl .sidebar-menu i {
            margin-right: 0;
            margin-left: 10px;
        }
        
        body.rtl .action-buttons {
            justify-content: flex-start;
        }
        
        body.rtl .btn-action {
            flex-direction: row-reverse;
        }
        
        body.rtl .section-title h2:after {
            left: auto;
            right: 50%;
            transform: translateX(50%);
        }
    </style>
</head>
<body>
    <!-- ==================== COMPTEUR VISITEURS ==================== -->
    <div class="visitor-counter" id="visitorCounter">
        <div class="container">
            <span id="visitorsLabel">Visiteurs: <span class="visitor-count" id="totalVisitors">0</span></span>
            <span id="onlineLabel">En ligne: <span class="visitor-count" id="onlineVisitors">0</span></span>
            <span id="lastVisitLabel">Dernière visite: <span id="lastVisit">--/--/---- --:--:--</span></span>
        </div>
    </div>

    <!-- ==================== BARRE D'AUTHENTIFICATION ==================== -->
    <div id="authBar" class="auth-bar">
        <div id="loginForm" class="auth-form">
            <input type="text" id="username" placeholder="Nom d'utilisateur" value="admin">
            <input type="password" id="password" placeholder="Mot de passe" value="123456">
            <button onclick="login()">Connexion</button>
            <small style="color: rgba(255,255,255,0.7); margin-left: 10px;">Test: admin / 123456</small>
        </div>
        <div id="userInfo" class="user-info hidden">
            <div>
                <span id="userName">Utilisateur</span>
                <span id="userRole" class="user-role">Admin</span>
            </div>
            <button id="logoutBtn" class="logout-btn" onclick="logout()">Déconnexion</button>
        </div>
    </div>

    <!-- ==================== MODALE DE TÉLÉVERSEMENT ==================== -->
    <div class="upload-modal" id="uploadModal">
        <div class="upload-modal-content">
            <h3 id="uploadModalTitle">Téléverser un fichier</h3>
            <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
                <i class="fas fa-cloud-upload-alt"></i>
                <p id="uploadText">Cliquez pour sélectionner ou glissez-déposez vos fichiers</p>
                <input type="file" id="fileInput" class="file-input" multiple accept="image/*,video/*">
            </div>
            <div class="file-preview" id="filePreview"></div>
            <div class="upload-progress" id="uploadProgress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">0%</p>
            </div>
            <div class="upload-buttons">
                <button class="btn" onclick="cancelUpload()" style="background-color: var(--danger);">
                    <i class="fas fa-times"></i> Annuler
                </button>
                <button class="btn" onclick="uploadToImgBB()" id="uploadBtn" style="background-color: var(--success);">
                    <i class="fas fa-upload"></i> Téléverser sur ImgBB
                </button>
            </div>
        </div>
    </div>

    <!-- ==================== SÉLECTEUR DE LANGUE ==================== -->
    <div class="language-switcher">
        <button class="lang-btn active" onclick="changeLanguage('fr')">
            <i class="fas fa-flag"></i> FR
        </button>
        <button class="lang-btn" onclick="changeLanguage('ar')">
            <i class="fas fa-star-and-crescent"></i> AR
        </button>
    </div>

    <!-- ==================== PANELS ADMIN/WEBMASTER ==================== -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-panel">
            <h3><i class="fas fa-user-shield"></i> Mode Administrateur</h3>
            <div class="admin-buttons">
                <button class="admin-btn" onclick="saveContent()">
                    <i class="fas fa-save"></i> Sauvegarder le contenu
                </button>
                <button class="admin-btn" onclick="showMediaLibrary()">
                    <i class="fas fa-images"></i> Bibliothèque média
                </button>
                <button class="admin-btn" onclick="scrollToSection('comments')">
                    <i class="fas fa-comments"></i> Gérer les commentaires
                </button>
                <button class="admin-btn" onclick="showUserManagement()">
                    <i class="fas fa-users"></i> Gestion des utilisateurs
                </button>
                <button class="admin-btn" onclick="showChangePasswordModal('admin')">
                    <i class="fas fa-key"></i> Changer mot de passe
                </button>
                <button class="admin-btn" onclick="logoutAdmin()" style="background-color: var(--danger); margin-top: 20px;">
                    <i class="fas fa-sign-out-alt"></i> Déconnexion
                </button>
            </div>
            <button class="btn" onclick="hideAdminPanel()" style="width: 100%; margin-top: 20px; background-color: var(--dark);">
                <i class="fas fa-times"></i> Fermer
            </button>
        </div>
    </div>

    <div class="webmaster-overlay" id="webmasterOverlay">
        <div class="webmaster-panel">
            <h3><i class="fas fa-user-cog"></i> Mode Webmaster</h3>
            <div class="webmaster-buttons">
                <button class="webmaster-btn" onclick="showMediaLibrary()">
                    <i class="fas fa-images"></i> Bibliothèque média
                </button>
                <button class="webmaster-btn" onclick="showUploadModal()">
                    <i class="fas fa-cloud-upload-alt"></i> Uploader fichiers
                </button>
                <button class="webmaster-btn" onclick="scrollToSection('comments')">
                    <i class="fas fa-comments"></i> Modérer commentaires
                </button>
                <button class="webmaster-btn" onclick="showChangePasswordModal('webmaster')">
                    <i class="fas fa-key"></i> Changer mot de passe
                </button>
                <button class="webmaster-btn" onclick="logoutWebmaster()" style="background-color: var(--danger); margin-top: 20px;">
                    <i class="fas fa-sign-out-alt"></i> Déconnexion
                </button>
            </div>
            <button class="btn" onclick="hideWebmasterPanel()" style="width: 100%; margin-top: 20px; background-color: var(--dark);">
                <i class="fas fa-times"></i> Fermer
            </button>
        </div>
    </div>

    <!-- ==================== EN-TÊTE ==================== -->
    <header>
        <div class="container header-container">
            <div class="logo editable" data-id="logo">
                <i class="fas fa-hands-helping"></i>
                <div class="logo-text">
                    <h1 data-editable="true" data-id="siteTitle">ASSOCIATION ANSFAL</h1>
                    <p data-editable="true" data-id="siteSubtitle">Coopération, Développement & Environnement</p>
                </div>
                <button class="edit-btn" onclick="editText('siteTitle')">
                    <i class="fas fa-edit"></i>
                </button>
            </div>
            
            <nav>
                <ul id="mainMenu">
                    <li><a href="#home" class="active" id="navHome">Accueil</a></li>
                    <li><a href="#about" id="navAbout">À propos</a></li>
                    <li><a href="#gallery" id="navGallery">Galerie</a></li>
                    <li><a href="#videos" id="navVideos">Vidéos</a></li>
                    <li><a href="#projects" id="navProjects">Projets</a></li>
                    <li><a href="#publications" id="navPublications">Publications</a></li>
                    <li><a href="#comments" id="navComments">Commentaires</a></li>
                    <li><a href="#contact" id="navContact">Contact</a></li>
                    <li><a href="#dashboard" id="navDashboard">Dashboard</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ==================== DASHBOARD SECTION ==================== -->
    <section id="dashboard" class="dashboard-section">
        <div class="dashboard-container">
            <!-- Sidebar du Dashboard -->
            <div class="dashboard-sidebar">
                <ul class="sidebar-menu" id="sidebarMenu">
                    <!-- Le menu sera rempli par JavaScript -->
                </ul>
            </div>

            <!-- Contenu du Dashboard -->
            <div class="dashboard-content">
                <h1 class="page-title" id="dashboardTitle">Tableau de Bord</h1>
                
                <!-- Message d'alerte -->
                <div id="dashboardAlert" class="alert hidden"></div>
                
                <!-- Statistiques Admin -->
                <div class="admin-stats">
                    <h2><i class="fas fa-chart-bar"></i> Statistiques</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3 id="stat1Title">Articles</h3>
                            <div class="stat-number">42</div>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat2Title">Utilisateurs Actifs</h3>
                            <div class="stat-number">156</div>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat3Title">Visites Quotidiennes</h3>
                            <div class="stat-number">2,843</div>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat4Title">Nouveaux Commentaires</h3>
                            <div class="stat-number">17</div>
                        </div>
                    </div>
                </div>

                <!-- Contenu du Dashboard -->
                <div class="content-grid" id="dashboardContent">
                    <!-- Les cartes seront remplies par JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== SECTION HÉRO ==================== -->
    <section class="hero" id="home">
        <div class="container">
            <h2 class="editable" data-id="heroTitle" data-editable="true">ANSFAL</h2>
            <button class="edit-btn" onclick="editText('heroTitle')">
                <i class="fas fa-edit"></i>
            </button>
            
            <h3 class="editable" data-id="heroSubtitle" data-editable="true">Association pour la Coopération, le Développement et l'Environnement</h3>
            <button class="edit-btn" onclick="editText('heroSubtitle')">
                <i class="fas fa-edit"></i>
            </button>
            
            <p class="editable" data-id="heroText" data-editable="true">Œuvrant pour un développement durable, la coopération nationale et la protection de l'environnement depuis 2023.</p>
            <button class="edit-btn" onclick="editText('heroText')">
                <i class="fas fa-edit"></i>
            </button>
            
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 30px;">
                <a href="#projects" class="btn" id="btnDiscover">Découvrir nos actions</a>
                <a href="#gallery" class="btn" id="btnGallery" style="background-color: var(--info); border-color: var(--info);">
                    <i class="fas fa-images"></i> Galerie
                </a>
                <a href="#comments" class="btn" id="btnComments" style="background-color: var(--warning); border-color: var(--warning);" onclick="scrollToSection('comments')">
                    <i class="fas fa-comments"></i> Commentaires
                </a>
                <a href="#dashboard" class="btn" id="btnDashboard" style="background-color: var(--primary); border-color: var(--primary);" onclick="showDashboard()">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
            </div>
        </div>
    </section>

    <!-- ==================== À PROPOS ==================== -->
    <section class="about" id="about">
        <div class="container">
            <div class="section-header">
                <div class="section-title">
                    <h2 class="editable" data-id="aboutTitle" data-editable="true">À propos d'ANSFAL</h2>
                    <button class="edit-btn" onclick="editText('aboutTitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <button class="add-section-btn" onclick="addAboutItem()" title="Ajouter un élément">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3 class="editable" data-id="aboutSubtitle" data-editable="true">Notre histoire</h3>
                    <button class="edit-btn" onclick="editText('aboutSubtitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                    
                    <p class="editable" data-id="aboutText1" data-editable="true">Fondée en 2023, l'Association ANSFAL POUR LA COOPÉRATION ET LE DÉVELOPPEMENT ET L'ENVIRONNEMENT est née de la conviction que le développement humain et la protection environnementale doivent aller de pair.</p>
                    <button class="edit-btn" onclick="editText('aboutText1')">
                        <i class="fas fa-edit"></i>
                    </button>
                    
                    <p class="editable" data-id="aboutText2" data-editable="true">Notre nom 'ANSFAL' symbolise notre engagement pour un avenir meilleur, basé sur la solidarité, le développement durable et la préservation de notre environnement.</p>
                    <button class="edit-btn" onclick="editText('aboutText2')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="about-img image-editable" data-id="aboutImage">
                    <img src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80" alt="Équipe ANSFAL">
                    <button class="image-edit-btn" onclick="editImage('aboutImage')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== GALERIE ==================== -->
    <section class="gallery" id="gallery">
        <div class="container">
            <div class="section-header">
                <div class="section-title">
                    <h2 class="editable" data-id="galleryTitle" data-editable="true">Galerie Photos</h2>
                    <button class="edit-btn" onclick="editText('galleryTitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <button class="add-section-btn" onclick="showImageUploadModal()" title="Ajouter une image">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="gallery-grid" id="galleryGrid">
                <div class="gallery-item image-editable" data-id="gallery1">
                    <img src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80" alt="Projet environnemental">
                    <button class="image-edit-btn" onclick="editImage('gallery1')">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="add-item-btn" onclick="showImageUploadModal()" title="Ajouter une image">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="remove-item-btn" onclick="removeGalleryItem('gallery1')" title="Supprimer cette image">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== VIDÉOS ==================== -->
    <section class="videos" id="videos">
        <div class="container">
            <div class="section-header">
                <div class="section-title">
                    <h2 class="editable" data-id="videosTitle" data-editable="true">Vidéos</h2>
                    <button class="edit-btn" onclick="editText('videosTitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <button class="add-section-btn" onclick="showVideoUploadModal()" title="Ajouter une vidéo">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="video-container" id="videoContainer">
                <div class="video-item">
                    <div class="youtube-embed">
                        <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen></iframe>
                    </div>
                    <button class="add-item-btn" onclick="showVideoUploadModal()" title="Ajouter une vidéo">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="remove-item-btn" onclick="removeVideoItem(this)" title="Supprimer cette vidéo">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== PROJETS ==================== -->
    <section class="projects" id="projects">
        <div class="container">
            <div class="section-header">
                <div class="section-title">
                    <h2 class="editable" data-id="projectsTitle" data-editable="true">Nos Projets</h2>
                    <button class="edit-btn" onclick="editText('projectsTitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <button class="add-section-btn" onclick="showProjectUploadModal()" title="Ajouter un projet">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="projects-container" id="projectsContainer">
                <div class="project-card">
                    <div class="project-img image-editable" data-id="project1">
                        <img src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80" alt="Projet Environnement">
                        <button class="image-edit-btn" onclick="editImage('project1')">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                    <div class="project-info">
                        <h3 class="editable" data-id="projectTitle1" data-editable="true">Protection des Forêts</h3>
                        <button class="edit-btn" onclick="editText('projectTitle1')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <p class="editable" data-id="projectDesc1" data-editable="true">Campagne de reboisement et sensibilisation à la protection des écosystèmes forestiers.</p>
                        <button class="edit-btn" onclick="editText('projectDesc1')">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                    <button class="add-item-btn" onclick="showProjectUploadModal()" title="Ajouter un projet">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="remove-item-btn" onclick="removeProjectItem(this)" title="Supprimer ce projet">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== PUBLICATIONS ==================== -->
    <section class="publications" id="publications">
        <div class="container">
            <div class="section-header">
                <div class="section-title">
                    <h2 class="editable" data-id="publicationsTitle" data-editable="true">Publications</h2>
                    <button class="edit-btn" onclick="editText('publicationsTitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <button class="add-section-btn" onclick="showPublicationUploadModal()" title="Ajouter une publication">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="publications-grid" id="publicationsGrid">
                <div class="publication-card">
                    <div class="publication-header">
                        <span class="publication-type">Rapport</span>
                        <span class="publication-date">15/03/2024</span>
                    </div>
                    <div class="publication-content">
                        <h3 class="publication-title editable" data-id="pubTitle1" data-editable="true">Rapport Annuel 2023</h3>
                        <button class="edit-btn" onclick="editText('pubTitle1')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <p class="publication-description editable" data-id="pubDesc1" data-editable="true">Bilan des activités et réalisations de l'association pour l'année 2023.</p>
                        <button class="edit-btn" onclick="editText('pubDesc1')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <div class="publication-actions">
                            <a href="#" class="btn-view">
                                <i class="fas fa-eye"></i> <span class="btn-view-text">Voir</span>
                            </a>
                            <a href="#" class="btn-download">
                                <i class="fas fa-download"></i> <span class="btn-download-text">Télécharger</span>
                            </a>
                        </div>
                    </div>
                    <button class="add-item-btn" onclick="showPublicationUploadModal()" title="Ajouter une publication">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="remove-item-btn" onclick="removePublicationItem(this)" title="Supprimer cette publication">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== COMMENTAIRES ==================== -->
    <section class="comments-section" id="comments">
        <div class="container">
            <h2 class="editable" data-id="commentsTitle" data-editable="true">Commentaires</h2>
            <button class="edit-btn" onclick="editText('commentsTitle')">
                <i class="fas fa-edit"></i>
            </button>
            <div class="comment-form">
                <h3>Laissez un commentaire</h3>
                <input type="text" id="commentNameInput" placeholder="Votre nom">
                <textarea id="commentTextInput" placeholder="Votre commentaire"></textarea>
                <button class="btn" onclick="submitComment()" id="btnSubmitComment">Publier le commentaire</button>
            </div>
            <div class="comments-list" id="commentsList">
                <div class="no-comments">Aucun commentaire pour le moment. Soyez le premier à commenter!</div>
            </div>
        </div>
    </section>

    <!-- ==================== CONTACT ==================== -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="editable" data-id="contactTitle" data-editable="true">Contactez-nous</h2>
            <button class="edit-btn" onclick="editText('contactTitle')">
                <i class="fas fa-edit"></i>
            </button>
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Adresse</h3>
                    <p class="editable" data-id="contactAddress" data-editable="true">Maroc</p>
                    <button class="edit-btn" onclick="editText('contactAddress')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <h3>Téléphone</h3>
                    <p class="editable" data-id="contactPhone" data-editable="true">+212 6 12 34 56 78</p>
                    <button class="edit-btn" onclick="editText('contactPhone')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <h3>Email</h3>
                    <p class="editable" data-id="contactEmail" data-editable="true">contact@ansfal.org</p>
                    <button class="edit-btn" onclick="editText('contactEmail')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== FOOTER ==================== -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-logo">
                    <div class="logo">
                        <i class="fas fa-hands-helping"></i>
                        <div class="logo-text">
                            <h3 style="color: white;">ANSFAL</h3>
                            <p style="color: rgba(255,255,255,0.8);">Coopération, Développement & Environnement</p>
                        </div>
                    </div>
                </div>
                <div class="footer-social">
                    <h4>Suivez-nous</h4>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 Association ANSFAL. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- ==================== BOUTONS FLOTTANTS ==================== -->
    <a href="#" class="whatsapp-float" id="whatsappBtn">
        <i class="fab fa-whatsapp"></i>
    </a>

    <button class="btn-add-float" id="addBtn" onclick="showAddMenu()">
        <i class="fas fa-plus"></i>
    </button>

    <button class="media-library-btn" id="mediaLibraryBtn" onclick="showMediaLibrary()">
        <i class="fas fa-images"></i>
    </button>

    <button class="comments-btn" id="commentsBtn" onclick="scrollToSection('comments')">
        <i class="fas fa-comments"></i>
        <span class="comments-badge"></span>
    </button>

    <button class="login-btn" id="loginBtn" onclick="showLoginModal()">
        <i class="fas fa-user-shield"></i>
    </button>

    <button class="webmaster-btn-float" id="webmasterBtn" onclick="showWebmasterLoginModal()">
        <i class="fas fa-user-cog"></i>
    </button>

    <!-- ==================== JAVASCRIPT ==================== -->
    <script>
        // Variables globales
        let isAdmin = false;
        let isWebmaster = false;
        let currentLanguage = 'fr';
        let contentData = {};
        let pendingComments = [];
        let approvedComments = [];
        let currentUser = null;
        let currentUploadType = null;
        let selectedFiles = [];
        let imgbbApiKey = 'ef721aa2f219a57af9b0d4b05dd0db2a'; // VOTRE CLÉ IMGBB

        // Traductions COMPLÈTES
        const translations = {
            'fr': {
                // Navigation
                'navHome': 'Accueil',
                'navAbout': 'À propos',
                'navGallery': 'Galerie',
                'navVideos': 'Vidéos',
                'navProjects': 'Projets',
                'navPublications': 'Publications',
                'navComments': 'Commentaires',
                'navContact': 'Contact',
                'navDashboard': 'Dashboard',
                
                // Hero
                'heroTitle': 'ANSFAL',
                'heroSubtitle': 'Association pour la Coopération, le Développement et l\'Environnement',
                'heroText': 'Œuvrant pour un développement durable, la coopération nationale et la protection de l\'environnement depuis 2023.',
                'btnDiscover': 'Découvrir nos actions',
                'btnGallery': 'Galerie',
                'btnComments': 'Commentaires',
                'btnDashboard': 'Dashboard',
                
                // About
                'aboutTitle': 'À propos d\'ANSFAL',
                'aboutSubtitle': 'Notre histoire',
                'aboutText1': 'Fondée en 2023, l\'Association ANSFAL POUR LA COOPÉRATION ET LE DÉVELOPPEMENT ET L\'ENVIRONNEMENT est née de la conviction que le développement humain et la protection environnementale doivent aller de pair.',
                'aboutText2': 'Notre nom \'ANSFAL\' symbolise notre engagement pour un avenir meilleur, basé sur la solidarité, le développement durable et la préservation de notre environnement.',
                
                // Sections
                'galleryTitle': 'Galerie Photos',
                'videosTitle': 'Vidéos',
                'projectsTitle': 'Nos Projets',
                'publicationsTitle': 'Publications',
                'commentsTitle': 'Commentaires',
                'contactTitle': 'Contactez-nous',
                
                // Projects
                'projectTitle1': 'Protection des Forêts',
                'projectDesc1': 'Campagne de reboisement et sensibilisation à la protection des écosystèmes forestiers.',
                
                // Publications
                'pubTitle1': 'Rapport Annuel 2023',
                'pubDesc1': 'Bilan des activités et réalisations de l\'association pour l\'année 2023.',
                'btnViewText': 'Voir',
                'btnDownloadText': 'Télécharger',
                
                // Contact
                'contactAddress': 'Maroc',
                'contactPhone': '+212 6 12 34 56 78',
                'contactEmail': 'contact@ansfal.org',
                
                // Labels
                'visitorsLabel': 'Visiteurs:',
                'onlineLabel': 'En ligne:',
                'lastVisitLabel': 'Dernière visite:',
                
                // Dashboard
                'dashboardTitle': 'Tableau de Bord',
                'stat1Title': 'Articles',
                'stat2Title': 'Utilisateurs Actifs',
                'stat3Title': 'Visites Quotidiennes',
                'stat4Title': 'Nouveaux Commentaires',
                
                // Auth
                'usernamePlaceholder': 'Nom d\'utilisateur',
                'passwordPlaceholder': 'Mot de passe',
                'loginButton': 'Connexion',
                'logoutButton': 'Déconnexion',
                
                // Comments
                'commentNamePlaceholder': 'Votre nom',
                'commentTextPlaceholder': 'Votre commentaire',
                'submitCommentButton': 'Publier le commentaire',
                'noComments': 'Aucun commentaire pour le moment. Soyez le premier à commenter!',
                
                // Upload Modal
                'uploadTitle': 'Téléverser un fichier',
                'uploadText': 'Cliquez pour sélectionner ou glissez-déposez vos fichiers',
                'cancelButton': 'Annuler',
                'uploadButton': 'Téléverser sur ImgBB'
            },
            'ar': {
                // Navigation
                'navHome': 'الرئيسية',
                'navAbout': 'عن الجمعية',
                'navGallery': 'المعرض',
                'navVideos': 'فيديوهات',
                'navProjects': 'المشاريع',
                'navPublications': 'المنشورات',
                'navComments': 'التعليقات',
                'navContact': 'اتصل',
                'navDashboard': 'لوحة التحكم',
                
                // Hero
                'heroTitle': 'أنسفال',
                'heroSubtitle': 'جمعية التعاون والتنمية والبيئة',
                'heroText': 'تعمل من أجل التنمية المستدامة، والتعاون وحماية البيئة منذ 2023.',
                'btnDiscover': 'اكتشف أنشطتنا',
                'btnGallery': 'المعرض',
                'btnComments': 'التعليقات',
                'btnDashboard': 'لوحة التحكم',
                
                // About
                'aboutTitle': 'عن أنسفال',
                'aboutSubtitle': 'تاريخنا',
                'aboutText1': 'تأسست في عام 2023، جمعية أنسفال للتعاون والتنمية والبيئة ولدت من قناعة بأن التنمية البشرية وحماية البيئة يجب أن يسيرا جنباً إلى جنب.',
                'aboutText2': 'اسمنا \'أنسفال\' يرمز لالتزامنا بمستقبل أفضل، يقوم على التضامن والتنمية المستدامة والحفاظ على بيئتنا.',
                
                // Sections
                'galleryTitle': 'معرض الصور',
                'videosTitle': 'مقاطع الفيديو',
                'projectsTitle': 'مشاريعنا',
                'publicationsTitle': 'المنشورات',
                'commentsTitle': 'التعليقات',
                'contactTitle': 'اتصل بنا',
                
                // Projects
                'projectTitle1': 'حماية الغابات',
                'projectDesc1': 'حملة التشجير والتوعية بحماية النظم البيئية للغابات.',
                
                // Publications
                'pubTitle1': 'التقرير السنوي 2023',
                'pubDesc1': 'خلاصة أنشطة وإنجازات الجمعية لعام 2023.',
                'btnViewText': 'عرض',
                'btnDownloadText': 'تحميل',
                
                // Contact
                'contactAddress': 'المغرب',
                'contactPhone': '212 6 12 34 56 78+',
                'contactEmail': 'contact@ansfal.org',
                
                // Labels
                'visitorsLabel': 'الزوار:',
                'onlineLabel': 'متصل الآن:',
                'lastVisitLabel': 'آخر زيارة:',
                
                // Dashboard
                'dashboardTitle': 'لوحة التحكم',
                'stat1Title': 'عدد المقالات',
                'stat2Title': 'المستخدمون النشطون',
                'stat3Title': 'الزيارات اليومية',
                'stat4Title': 'التعليقات الجديدة',
                
                // Auth
                'usernamePlaceholder': 'اسم المستخدم',
                'passwordPlaceholder': 'كلمة المرور',
                'loginButton': 'تسجيل الدخول',
                'logoutButton': 'تسجيل الخروج',
                
                // Comments
                'commentNamePlaceholder': 'اسمك',
                'commentTextPlaceholder': 'تعليقك',
                'submitCommentButton': 'نشر التعليق',
                'noComments': 'لا توجد تعليقات بعد. كن أول من يعلق!',
                
                // Upload Modal
                'uploadTitle': 'رفع ملف',
                'uploadText': 'انقر لتحديد أو اسحب وأفلت ملفاتك',
                'cancelButton': 'إلغاء',
                'uploadButton': 'رفع على ImgBB'
            }
        };

        // ==================== GESTION DES LANGUES ====================
        function changeLanguage(lang, initialLoad = false) {
            console.log('Changement de langue vers:', lang);
            
            currentLanguage = lang;
            localStorage.setItem('ansfal_language', lang);
            
            // Mettre à jour les boutons de langue
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeBtn = document.querySelector(`.lang-btn[onclick*="changeLanguage('${lang}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            // Appliquer la direction RTL pour l'arabe
            if (lang === 'ar') {
                document.body.classList.add('rtl');
                document.body.style.fontFamily = "'Cairo', sans-serif";
            } else {
                document.body.classList.remove('rtl');
                document.body.style.fontFamily = "'Roboto', sans-serif";
            }
            
            // Traduire la page
            translatePage(lang);
            
            // Mettre à jour l'interface
            updateUIForLanguage();
            
            // Mettre à jour le dashboard
            if (!initialLoad && document.querySelector('.dashboard-section.active')) {
                updateDashboardLanguage();
            }
            
            // Mettre à jour l'upload modal si ouvert
            if (document.getElementById('uploadModal').classList.contains('active')) {
                updateUploadModalLanguage();
            }
        }

        function translatePage(lang) {
            console.log('Traduction en cours pour:', lang);
            
            const t = translations[lang];
            if (!t) return;
            
            // Traduire tous les éléments avec data-id
            document.querySelectorAll('[data-id]').forEach(element => {
                const id = element.getAttribute('data-id');
                if (t[id] && element.hasAttribute('data-editable')) {
                    element.textContent = t[id];
                }
            });
            
            // Traduire les boutons spéciaux
            const specialButtons = ['btnDiscover', 'btnGallery', 'btnComments', 'btnDashboard'];
            specialButtons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn && t[btnId]) {
                    const icon = btn.querySelector('i');
                    if (icon) {
                        btn.innerHTML = icon.outerHTML + ' ' + t[btnId];
                    } else {
                        btn.textContent = t[btnId];
                    }
                }
            });
            
            // Traduire la navigation
            const navIds = ['navHome', 'navAbout', 'navGallery', 'navVideos', 'navProjects', 
                           'navPublications', 'navComments', 'navContact', 'navDashboard'];
            navIds.forEach(navId => {
                const navElement = document.getElementById(navId);
                if (navElement && t[navId]) {
                    navElement.textContent = t[navId];
                }
            });
            
            // Traduire les labels du compteur
            const totalVisitors = document.getElementById('totalVisitors').textContent;
            const onlineVisitors = document.getElementById('onlineVisitors').textContent;
            const lastVisit = document.getElementById('lastVisit').textContent;
            
            document.getElementById('visitorsLabel').innerHTML = t['visitorsLabel'] + ' <span class="visitor-count" id="totalVisitors">' + totalVisitors + '</span>';
            document.getElementById('onlineLabel').innerHTML = t['onlineLabel'] + ' <span class="visitor-count" id="onlineVisitors">' + onlineVisitors + '</span>';
            document.getElementById('lastVisitLabel').innerHTML = t['lastVisitLabel'] + ' <span id="lastVisit">' + lastVisit + '</span>';
            
            // Traduire le formulaire d'authentification
            if (document.getElementById('username')) {
                document.getElementById('username').placeholder = t['usernamePlaceholder'];
                document.getElementById('password').placeholder = t['passwordPlaceholder'];
                document.querySelector('#loginForm button').textContent = t['loginButton'];
                document.getElementById('logoutBtn').textContent = t['logoutButton'];
            }
            
            // Traduire le formulaire de commentaires
            if (document.getElementById('commentNameInput')) {
                document.getElementById('commentNameInput').placeholder = t['commentNamePlaceholder'];
                document.getElementById('commentTextInput').placeholder = t['commentTextPlaceholder'];
                document.getElementById('btnSubmitComment').textContent = t['submitCommentButton'];
            }
            
            // Traduire les boutons des publications
            document.querySelectorAll('.btn-view-text').forEach(el => {
                el.textContent = t['btnViewText'];
            });
            
            document.querySelectorAll('.btn-download-text').forEach(el => {
                el.textContent = t['btnDownloadText'];
            });
            
            // Traduire le message "aucun commentaire"
            const noCommentsDiv = document.querySelector('.no-comments');
            if (noCommentsDiv) {
                noCommentsDiv.textContent = t['noComments'];
            }
            
            console.log('Traduction terminée');
        }

        function updateUIForLanguage() {
            // Mettre à jour les titres des boutons flottants
            document.getElementById('whatsappBtn').title = currentLanguage === 'ar' ? 'تواصل عبر واتساب' : 'Contactez-nous sur WhatsApp';
            document.getElementById('addBtn').title = currentLanguage === 'ar' ? 'إضافة محتوى' : 'Ajouter du contenu';
            document.getElementById('commentsBtn').title = currentLanguage === 'ar' ? 'التعليقات' : 'Commentaires';
            document.getElementById('loginBtn').title = currentLanguage === 'ar' ? 'تسجيل الدخول' : 'Connexion';
            document.getElementById('webmasterBtn').title = currentLanguage === 'ar' ? 'مدير النظام' : 'Webmaster';
            document.getElementById('mediaLibraryBtn').title = currentLanguage === 'ar' ? 'مكتبة الوسائط' : 'Bibliothèque média';
            
            // Mettre à jour le nom de l'utilisateur si connecté
            if (currentUser && currentUser.name) {
                const userNameElement = document.getElementById('userName');
                if (userNameElement) {
                    if (currentLanguage === 'ar') {
                        userNameElement.textContent = currentUser.name.includes('Administrateur') ? 'مدير أنسفال' : currentUser.name;
                    } else {
                        userNameElement.textContent = currentUser.name;
                    }
                }
            }
        }

        function updateUploadModalLanguage() {
            const t = translations[currentLanguage];
            if (!t) return;
            
            const title = document.getElementById('uploadModalTitle');
            const text = document.getElementById('uploadText');
            const cancelBtn = document.querySelector('.upload-buttons .btn:first-child');
            const uploadBtn = document.getElementById('uploadBtn');
            
            if (title && t['uploadTitle']) title.textContent = t['uploadTitle'];
            if (text && t['uploadText']) text.textContent = t['uploadText'];
            if (cancelBtn && t['cancelButton']) cancelBtn.innerHTML = `<i class="fas fa-times"></i> ${t['cancelButton']}`;
            if (uploadBtn && t['uploadButton']) uploadBtn.innerHTML = `<i class="fas fa-upload"></i> ${t['uploadButton']}`;
        }

        function updateDashboardLanguage() {
            const t = translations[currentLanguage];
            if (!t) return;
            
            const title = document.getElementById('dashboardTitle');
            if (title && t['dashboardTitle']) {
                title.textContent = t['dashboardTitle'];
            }
            
            // Mettre à jour les titres des statistiques
            const statTitles = ['stat1Title', 'stat2Title', 'stat3Title', 'stat4Title'];
            statTitles.forEach((statId, index) => {
                const elements = document.querySelectorAll('.stat-card h3');
                if (elements[index] && t[statId]) {
                    elements[index].textContent = t[statId];
                }
            });
        }

        // ==================== FONCTIONS D'INITIALISATION ====================
        function initDragAndDrop() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            
            if (!uploadArea || !fileInput) return;
            
            // Événement dragover
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.add('drag-over');
            });
            
            // Événement dragleave
            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.remove('drag-over');
            });
            
            // Événement drop
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                handleFileSelection(files);
            });
            
            // Événement change du input file
            fileInput.addEventListener('change', (e) => {
                handleFileSelection(e.target.files);
            });
        }

        function handleFileSelection(files) {
            console.log('Fichiers sélectionnés:', files);
            selectedFiles = Array.from(files);
            updateFilePreview();
        }

        function updateFilePreview() {
            const filePreview = document.getElementById('filePreview');
            if (!filePreview) return;
            
            filePreview.innerHTML = '';
            
            if (selectedFiles.length === 0) {
                return;
            }
            
            selectedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                const fileIcon = getFileIcon(file.type);
                const fileSize = formatFileSize(file.size);
                
                fileItem.innerHTML = `
                    <div class="file-info">
                        <i class="fas fa-${fileIcon} file-icon"></i>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${fileSize}</div>
                        </div>
                    </div>
                    <button class="remove-file" onclick="removeFile(${index})">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                filePreview.appendChild(fileItem);
            });
            
            const uploadBtn = document.getElementById('uploadBtn');
            if (uploadBtn) {
                uploadBtn.disabled = false;
            }
        }

        function getFileIcon(fileType) {
            if (fileType.startsWith('image/')) return 'image';
            if (fileType.startsWith('video/')) return 'video';
            if (fileType.includes('pdf')) return 'file-pdf';
            return 'file';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            updateFilePreview();
            
            // Réinitialiser l'input file
            document.getElementById('fileInput').value = '';
        }

        // ==================== FONCTIONS DE TÉLÉVERSEMENT IMGBBB ====================
        async function uploadToImgBB() {
            console.log('UploadToImgBB appelé, fichiers sélectionnés:', selectedFiles);
            
            if (selectedFiles.length === 0) {
                showAlert(
                    currentLanguage === 'ar' ? 'لم يتم اختيار أي ملف' : 'Aucun fichier sélectionné',
                    'error'
                );
                return;
            }
            
            const uploadBtn = document.getElementById('uploadBtn');
            const progressBar = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const uploadProgress = document.getElementById('uploadProgress');
            
            if (!uploadBtn || !progressBar || !progressText || !uploadProgress) return;
            
            uploadBtn.disabled = true;
            uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ' + 
                (currentLanguage === 'ar' ? 'جاري الرفع...' : 'Téléversement...');
            
            uploadProgress.style.display = 'block';
            
            try {
                // Upload chaque fichier
                for (let i = 0; i < selectedFiles.length; i++) {
                    const file = selectedFiles[i];
                    
                    // Mettre à jour la progression
                    const progress = ((i / selectedFiles.length) * 100).toFixed(0);
                    progressBar.style.width = progress + '%';
                    progressText.textContent = progress + '%';
                    
                    // Upload vers ImgBB
                    const imageUrl = await uploadFileToImgBB(file);
                    
                    if (imageUrl) {
                        // Sauvegarder l'image dans la galerie
                        addGalleryItem(imageUrl, file.name);
                        
                        // Sauvegarder dans localStorage
                        saveImageToGallery(imageUrl, file.name);
                        
                        showAlert(
                            currentLanguage === 'ar' ? `تم رفع ${file.name} بنجاح` : `Fichier ${file.name} téléversé avec succès`,
                            'success'
                        );
                    }
                }
                
                // Finaliser la progression
                progressBar.style.width = '100%';
                progressText.textContent = '100%';
                
                setTimeout(() => {
                    resetUploadModal();
                    hideUploadModal();
                    showAlert(
                        currentLanguage === 'ar' ? 'تم رفع جميع الملفات بنجاح!' : 'Tous les fichiers ont été téléversés avec succès!',
                        'success'
                    );
                }, 500);
                
            } catch (error) {
                console.error('Erreur lors du téléversement:', error);
                showAlert(
                    currentLanguage === 'ar' ? 'حدث خطأ أثناء الرفع' : 'Erreur lors du téléversement',
                    'error'
                );
            } finally {
                uploadBtn.disabled = false;
                uploadBtn.innerHTML = `<i class="fas fa-upload"></i> ${translations[currentLanguage]['uploadButton']}`;
            }
        }

        async function uploadFileToImgBB(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const base64Image = e.target.result.split(',')[1];
                    
                    const formData = new FormData();
                    formData.append('key', imgbbApiKey);
                    formData.append('image', base64Image);
                    formData.append('name', file.name);
                    
                    // Envoyer à l'API ImgBB
                    fetch('https://api.imgbb.com/1/upload', {
                        method: 'POST',
                        body: formData
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            resolve(data.data.url);
                        } else {
                            reject(new Error(data.error?.message || 'Upload failed'));
                        }
                    })
                    .catch(error => {
                        reject(error);
                    });
                };
                
                reader.onerror = function(error) {
                    reject(error);
                };
                
                reader.readAsDataURL(file);
            });
        }

        function saveImageToGallery(url, filename) {
            // Sauvegarder dans le localStorage
            const gallery = JSON.parse(localStorage.getItem('ansfal_gallery')) || [];
            gallery.push({
                url: url,
                filename: filename,
                date: new Date().toISOString(),
                uploadedBy: currentUser ? currentUser.username : 'Anonymous'
            });
            localStorage.setItem('ansfal_gallery', JSON.stringify(gallery));
        }

        function resetUploadModal() {
            selectedFiles = [];
            const filePreview = document.getElementById('filePreview');
            const progressBar = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const uploadProgress = document.getElementById('uploadProgress');
            const uploadBtn = document.getElementById('uploadBtn');
            
            if (filePreview) filePreview.innerHTML = '';
            if (progressBar) progressBar.style.width = '0%';
            if (progressText) progressText.textContent = '0%';
            if (uploadProgress) uploadProgress.style.display = 'none';
            if (uploadBtn) {
                uploadBtn.disabled = false;
                uploadBtn.innerHTML = `<i class="fas fa-upload"></i> ${translations[currentLanguage]['uploadButton']}`;
            }
            
            // Réinitialiser l'input file
            document.getElementById('fileInput').value = '';
        }

        function cancelUpload() {
            resetUploadModal();
            hideUploadModal();
        }

        function showUploadModal(type = 'image') {
            currentUploadType = type;
            const modal = document.getElementById('uploadModal');
            const title = document.getElementById('uploadModalTitle');
            const text = document.getElementById('uploadText');
            const fileInput = document.getElementById('fileInput');
            
            if (!modal || !title || !text || !fileInput) return;
            
            updateUploadModalLanguage(); // Mettre à jour la langue
            
            if (type === 'image') {
                title.textContent = currentLanguage === 'ar' ? 'رفع صورة' : 'Téléverser une image';
                text.textContent = currentLanguage === 'ar' ? 'انقر لتحديد أو اسحب وأفلت صورك' : 'Cliquez pour sélectionner ou glissez-déposez vos images';
                fileInput.accept = 'image/*';
            } else if (type === 'video') {
                title.textContent = currentLanguage === 'ar' ? 'رفع فيديو' : 'Téléverser une vidéo';
                text.textContent = currentLanguage === 'ar' ? 'انقر لتحديد أو اسحب وأفلت فيديوهاتك' : 'Cliquez pour sélectionner ou glissez-déposez vos vidéos';
                fileInput.accept = 'video/*';
            }
            
            modal.classList.add('active');
        }

        function hideUploadModal() {
            const modal = document.getElementById('uploadModal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        // ==================== FONCTIONS D'AJOUT ====================
        function showImageUploadModal() {
            showUploadModal('image');
        }

        function showVideoUploadModal() {
            showUploadModal('video');
        }

        function showProjectUploadModal() {
            const title = prompt(
                currentLanguage === 'ar' ? 'أدخل عنوان المشروع:' : 'Entrez le titre du projet:',
                currentLanguage === 'ar' ? 'مشروع جديد' : 'Nouveau projet'
            );
            if (!title) return;
            
            const description = prompt(
                currentLanguage === 'ar' ? 'أدخل وصف المشروع:' : 'Entrez la description du projet:',
                currentLanguage === 'ar' ? 'وصف المشروع' : 'Description du projet'
            );
            if (!description) return;
            
            showUploadModal('project');
            window.projectInfo = { title, description };
        }

        function showPublicationUploadModal() {
            const title = prompt(
                currentLanguage === 'ar' ? 'أدخل عنوان المنشور:' : 'Entrez le titre de la publication:',
                currentLanguage === 'ar' ? 'منشور جديد' : 'Nouvelle publication'
            );
            if (!title) return;
            
            const description = prompt(
                currentLanguage === 'ar' ? 'أدخل وصف المنشور:' : 'Entrez la description de la publication:',
                currentLanguage === 'ar' ? 'وصف المنشور' : 'Description de la publication'
            );
            if (!description) return;
            
            showUploadModal('publication');
            window.publicationInfo = { title, description };
        }

        function showAddMenu() {
            const options = [
                { text: 'Image', icon: 'image', action: 'showImageUploadModal' },
                { text: 'Vidéo', icon: 'video', action: 'showVideoUploadModal' },
                { text: 'Projet', icon: 'project-diagram', action: 'showProjectUploadModal' },
                { text: 'Publication', icon: 'file-alt', action: 'showPublicationUploadModal' },
                { text: 'Texte', icon: 'font', action: 'addAboutItem' }
            ];
            
            const menu = document.createElement('div');
            menu.className = 'add-menu';
            
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'add-menu-item';
                btn.onmouseover = () => btn.style.background = '#f0f9f3';
                btn.onmouseout = () => btn.style.background = 'none';
                btn.onclick = () => {
                    if (!checkPermission('canAdd')) {
                        showAlert(
                            currentLanguage === 'ar' ? 'ليس لديك صلاحية الإضافة' : 'Vous n\'avez pas la permission d\'ajouter',
                            'error'
                        );
                        return;
                    }
                    window[option.action]();
                    menu.remove();
                };
                
                const displayText = currentLanguage === 'ar' ? 
                    (option.text === 'Image' ? 'صورة' :
                     option.text === 'Vidéo' ? 'فيديو' :
                     option.text === 'Projet' ? 'مشروع' :
                     option.text === 'Publication' ? 'منشور' : 'نص') : option.text;
                
                btn.innerHTML = `
                    <i class="fas fa-${option.icon}"></i>
                    <span>${displayText}</span>
                `;
                
                menu.appendChild(btn);
            });
            
            document.body.appendChild(menu);
            
            setTimeout(() => {
                const closeMenu = (e) => {
                    if (!menu.contains(e.target) && e.target.id !== 'addBtn') {
                        menu.remove();
                        document.removeEventListener('click', closeMenu);
                    }
                };
                document.addEventListener('click', closeMenu);
            }, 100);
        }

        // ==================== FONCTIONS D'AUTHENTIFICATION ====================
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === 'admin' && password === '123456') {
                currentUser = {
                    username: username,
                    role: 'admin',
                    name: currentLanguage === 'ar' ? 'مدير أنسفال' : 'Administrateur ANSFAL'
                };
                
                localStorage.setItem('ansfal_user', JSON.stringify(currentUser));
                showUserInfo();
                showAlert(
                    currentLanguage === 'ar' ? 'تم تسجيل الدخول بنجاح!' : 'Connexion réussie !',
                    'success'
                );
                updateInterfaceForRole();
            } else {
                showAlert(
                    currentLanguage === 'ar' ? 'بيانات الدخول غير صحيحة' : 'Identifiants incorrects',
                    'error'
                );
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('ansfal_user');
            hideUserInfo();
            showAlert(
                currentLanguage === 'ar' ? 'تم تسجيل الخروج' : 'Déconnexion réussie',
                'success'
            );
            updateInterfaceForRole();
        }

        function showUserInfo() {
            if (currentUser) {
                document.getElementById('loginForm').classList.add('hidden');
                document.getElementById('userInfo').classList.remove('hidden');
                
                const userNameElement = document.getElementById('userName');
                const userRoleElement = document.getElementById('userRole');
                
                if (userNameElement) {
                    userNameElement.textContent = currentUser.name;
                }
                
                if (userRoleElement) {
                    userRoleElement.textContent = currentLanguage === 'ar' ? 'مدير' : 'Admin';
                }
            }
        }

        function hideUserInfo() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        function checkPermission(action) {
            if (!currentUser) return false;
            
            if (currentUser.role === 'admin') {
                return true; // Admin a tous les droits
            }
            
            if (currentUser.role === 'webmaster') {
                const webmasterPermissions = ['canAdd', 'canEdit', 'canDelete', 'canUpload'];
                return webmasterPermissions.includes(action);
            }
            
            return false;
        }

        // ==================== FONCTIONS UTILITAIRES ====================
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert ${type}`;
            alertDiv.textContent = message;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '100px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '9999';
            alertDiv.style.maxWidth = '300px';
            alertDiv.style.padding = '15px';
            alertDiv.style.borderRadius = '6px';
            alertDiv.style.fontWeight = '500';
            
            if (type === 'success') {
                alertDiv.style.background = '#d4edda';
                alertDiv.style.color = '#155724';
                alertDiv.style.border = '1px solid #c3e6cb';
            } else if (type === 'error') {
                alertDiv.style.background = '#f8d7da';
                alertDiv.style.color = '#721c24';
                alertDiv.style.border = '1px solid #f5c6cb';
            }
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        function updateInterfaceForRole() {
            if (currentUser) {
                document.body.classList.add('authenticated');
                document.getElementById('addBtn').classList.add('active');
                document.getElementById('mediaLibraryBtn').classList.add('active');
            } else {
                document.body.classList.remove('authenticated');
                document.getElementById('addBtn').classList.remove('active');
                document.getElementById('mediaLibraryBtn').classList.remove('active');
            }
        }

        // ==================== INITIALISATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Charger la langue
            const savedLang = localStorage.getItem('ansfal_language') || 'fr';
            changeLanguage(savedLang, true);
            
            // Charger les données
            loadContentData();
            loadComments();
            updateVisitorCount();
            
            // Vérifier l'authentification
            checkAuth();
            
            // Initialiser WhatsApp
            initWhatsApp();
            
            // Initialiser la navigation
            initNavigation();
            
            // Initialiser le dashboard
            initDashboard();
            
            // Mettre à jour l'interface selon les rôles
            updateInterfaceForRole();
            
            // Initialiser les commentaires
            renderComments();
            
            // Initialiser le drag and drop
            initDragAndDrop();
            
            // Vérifier l'utilisateur connecté
            const savedUser = localStorage.getItem('ansfal_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showUserInfo();
            }
            
            // Ajouter un écouteur pour le clic sur la zone d'upload
            const uploadArea = document.getElementById('uploadArea');
            if (uploadArea) {
                uploadArea.addEventListener('click', function(e) {
                    e.stopPropagation();
                    document.getElementById('fileInput').click();
                });
            }
        });

        // ==================== FONCTIONS DE BASE ====================
        function loadContentData() {
            const saved = localStorage.getItem('ansfal_content');
            if (saved) {
                contentData = JSON.parse(saved);
            }
        }

        function loadComments() {
            const saved = localStorage.getItem('ansfal_comments');
            if (saved) {
                approvedComments = JSON.parse(saved);
            }
        }

        function updateVisitorCount() {
            let total = parseInt(localStorage.getItem('ansfal_visitors') || '0');
            total++;
            localStorage.setItem('ansfal_visitors', total.toString());
            document.getElementById('totalVisitors').textContent = total;
            
            // Simuler les visiteurs en ligne
            const online = Math.floor(Math.random() * 50) + 1;
            document.getElementById('onlineVisitors').textContent = online;
            
            // Mettre à jour la dernière visite
            const now = new Date();
            const lastVisit = now.toLocaleString(currentLanguage === 'ar' ? 'ar-MA' : 'fr-FR');
            document.getElementById('lastVisit').textContent = lastVisit;
        }

        function checkAuth() {
            const savedUser = localStorage.getItem('ansfal_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showUserInfo();
            }
        }

        function initWhatsApp() {
            const phone = "+212612345678";
            const message = currentLanguage === 'ar' ? 
                "مرحباً، أريد معلومات عن جمعية أنسفال" : 
                "Bonjour, je voudrais des informations sur l'association ANSFAL";
            const whatsappUrl = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
            document.getElementById('whatsappBtn').href = whatsappUrl;
        }

        function initNavigation() {
            // Navigation simple
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    
                    if (targetId === 'dashboard') {
                        showDashboard();
                    } else {
                        scrollToSection(targetId);
                    }
                    
                    // Mettre à jour la classe active
                    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        function initDashboard() {
            // Initialisation basique du dashboard
            const sidebarMenu = document.getElementById('sidebarMenu');
            if (sidebarMenu) {
                const menuItems = [
                    { icon: 'tachometer-alt', text: 'Tableau de bord', id: 'dashboard' },
                    { icon: 'chart-bar', text: 'Statistiques', id: 'stats' },
                    { icon: 'images', text: 'Médias', id: 'media' },
                    { icon: 'comments', text: 'Commentaires', id: 'comments' },
                    { icon: 'users', text: 'Utilisateurs', id: 'users' },
                    { icon: 'cog', text: 'Paramètres', id: 'settings' }
                ];
                
                menuItems.forEach(item => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = '#';
                    a.innerHTML = `<i class="fas fa-${item.icon}"></i> ${item.text}`;
                    a.onclick = (e) => {
                        e.preventDefault();
                        // Ici on peut charger le contenu correspondant
                        showAlert(`Section ${item.text}`, 'success');
                    };
                    li.appendChild(a);
                    sidebarMenu.appendChild(li);
                });
            }
        }

        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function showDashboard() {
            document.querySelectorAll('section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('dashboard').classList.add('active');
            
            // Mettre à jour la navigation
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            document.getElementById('navDashboard').classList.add('active');
            
            // Mettre à jour la langue du dashboard
            updateDashboardLanguage();
            
            // Scroll vers le dashboard
            scrollToSection('dashboard');
        }

        // ==================== FONCTIONS SIMPLIFIÉES POUR LA DÉMO ====================
        function editText(elementId) {
            const element = document.querySelector(`[data-id="${elementId}"]`);
            if (element) {
                const currentText = element.textContent;
                const newText = prompt(
                    currentLanguage === 'ar' ? 'أدخل النص الجديد:' : 'Entrez le nouveau texte:',
                    currentText
                );
                if (newText !== null) {
                    element.textContent = newText;
                    showAlert(
                        currentLanguage === 'ar' ? 'تم تحديث النص' : 'Texte mis à jour',
                        'success'
                    );
                }
            }
        }

        function editImage(elementId) {
            const element = document.querySelector(`[data-id="${elementId}"] img`);
            if (element) {
                const newUrl = prompt(
                    currentLanguage === 'ar' ? 'أدخل رابط الصورة الجديد:' : 'Entrez la nouvelle URL de l\'image:',
                    element.src
                );
                if (newUrl && newUrl.trim() !== '') {
                    element.src = newUrl;
                    showAlert(
                        currentLanguage === 'ar' ? 'تم تحديث الصورة' : 'Image mise à jour',
                        'success'
                    );
                }
            }
        }

        function addAboutItem() {
            const newText = prompt(
                currentLanguage === 'ar' ? 'أدخل النص الجديد:' : 'Entrez le nouveau texte:',
                currentLanguage === 'ar' ? 'نص جديد' : 'Nouveau texte'
            );
            if (newText) {
                const aboutText = document.querySelector('.about-text');
                if (aboutText) {
                    const newParagraph = document.createElement('p');
                    newParagraph.className = 'editable';
                    newParagraph.setAttribute('data-id', 'aboutText' + (Math.random() * 1000).toFixed(0));
                    newParagraph.setAttribute('data-editable', 'true');
                    newParagraph.textContent = newText;
                    
                    // Ajouter le bouton d'édition
                    const editBtn = document.createElement('button');
                    editBtn.className = 'edit-btn';
                    editBtn.innerHTML = '<i class="fas fa-edit"></i>';
                    editBtn.onclick = function() {
                        const currentText = newParagraph.textContent;
                        const updatedText = prompt(
                            currentLanguage === 'ar' ? 'أدخل النص الجديد:' : 'Entrez le nouveau texte:',
                            currentText
                        );
                        if (updatedText !== null) {
                            newParagraph.textContent = updatedText;
                        }
                    };
                    
                    newParagraph.appendChild(editBtn);
                    aboutText.appendChild(newParagraph);
                    
                    showAlert(
                        currentLanguage === 'ar' ? 'تمت الإضافة بنجاح' : 'Élément ajouté avec succès',
                        'success'
                    );
                }
            }
        }

        function submitComment() {
            const nameInput = document.getElementById('commentNameInput');
            const textInput = document.getElementById('commentTextInput');
            
            if (!nameInput.value.trim() || !textInput.value.trim()) {
                showAlert(
                    currentLanguage === 'ar' ? 'الرجاء ملء جميع الحقول' : 'Veuillez remplir tous les champs',
                    'error'
                );
                return;
            }
            
            const newComment = {
                id: Date.now(),
                name: nameInput.value.trim(),
                text: textInput.value.trim(),
                date: new Date().toLocaleDateString(currentLanguage === 'ar' ? 'ar-MA' : 'fr-FR'),
                approved: currentUser ? true : false // Auto-approve si connecté
            };
            
            if (currentUser) {
                approvedComments.push(newComment);
                localStorage.setItem('ansfal_comments', JSON.stringify(approvedComments));
            } else {
                pendingComments.push(newComment);
                localStorage.setItem('ansfal_pending_comments', JSON.stringify(pendingComments));
            }
            
            // Réinitialiser le formulaire
            nameInput.value = '';
            textInput.value = '';
            
            // Mettre à jour l'affichage
            renderComments();
            
            showAlert(
                currentLanguage === 'ar' ? 
                    (currentUser ? 'تم نشر التعليق' : 'تم إرسال التعليق للمراجعة') :
                    (currentUser ? 'Commentaire publié' : 'Commentaire envoyé pour modération'),
                'success'
            );
        }

        function renderComments() {
            const commentsList = document.getElementById('commentsList');
            if (!commentsList) return;
            
            const allComments = [...approvedComments];
            
            if (allComments.length === 0) {
                commentsList.innerHTML = `
                    <div class="no-comments">
                        ${currentLanguage === 'ar' ? 'لا توجد تعليقات بعد. كن أول من يعلق!' : 'Aucun commentaire pour le moment. Soyez le premier à commenter!'}
                    </div>
                `;
                return;
            }
            
            commentsList.innerHTML = '';
            
            allComments.forEach(comment => {
                const commentDiv = document.createElement('div');
                commentDiv.className = 'comment-item';
                commentDiv.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-author">${comment.name}</div>
                        <div class="comment-date">${comment.date}</div>
                    </div>
                    <div class="comment-content">${comment.text}</div>
                `;
                commentsList.appendChild(commentDiv);
            });
        }

        // ==================== FONCTIONS POUR LES BOUTONS FLOTTANTS ====================
        function showLoginModal() {
            document.getElementById('adminOverlay').classList.add('active');
        }

        function hideAdminPanel() {
            document.getElementById('adminOverlay').classList.remove('active');
        }

        function showWebmasterLoginModal() {
            document.getElementById('webmasterOverlay').classList.add('active');
        }

        function hideWebmasterPanel() {
            document.getElementById('webmasterOverlay').classList.remove('active');
        }

        function showMediaLibrary() {
            showAlert(
                currentLanguage === 'ar' ? 'مكتبة الوسائط' : 'Bibliothèque média',
                'info'
            );
        }

        // ==================== FONCTIONS DE SUPPRESSION ====================
        function removeGalleryItem(itemId) {
            if (confirm(currentLanguage === 'ar' ? 'هل أنت متأكد من حذف هذه الصورة؟' : 'Êtes-vous sûr de vouloir supprimer cette image ?')) {
                const item = document.querySelector(`[data-id="${itemId}"]`);
                if (item) {
                    item.remove();
                    showAlert(
                        currentLanguage === 'ar' ? 'تم حذف الصورة' : 'Image supprimée',
                        'success'
                    );
                }
            }
        }

        function removeVideoItem(button) {
            if (confirm(currentLanguage === 'ar' ? 'هل أنت متأكد من حذف هذا الفيديو؟' : 'Êtes-vous sûr de vouloir supprimer cette vidéo ?')) {
                const item = button.closest('.video-item');
                if (item) {
                    item.remove();
                    showAlert(
                        currentLanguage === 'ar' ? 'تم حذف الفيديو' : 'Vidéo supprimée',
                        'success'
                    );
                }
            }
        }

        function removeProjectItem(button) {
            if (confirm(currentLanguage === 'ar' ? 'هل أنت متأكد من حذف هذا المشروع؟' : 'Êtes-vous sûr de vouloir supprimer ce projet ?')) {
                const item = button.closest('.project-card');
                if (item) {
                    item.remove();
                    showAlert(
                        currentLanguage === 'ar' ? 'تم حذف المشروع' : 'Projet supprimé',
                        'success'
                    );
                }
            }
        }

        function removePublicationItem(button) {
            if (confirm(currentLanguage === 'ar' ? 'هل أنت متأكد من حذف هذا المنشور؟' : 'Êtes-vous sûr de vouloir supprimer cette publication ?')) {
                const item = button.closest('.publication-card');
                if (item) {
                    item.remove();
                    showAlert(
                        currentLanguage === 'ar' ? 'تم حذف المنشور' : 'Publication supprimée',
                        'success'
                    );
                }
            }
        }

        // ==================== FONCTIONS D'AJOUT D'ÉLÉMENTS ====================
        function addGalleryItem(imageSrc, altText) {
            const galleryGrid = document.getElementById('galleryGrid');
            if (!galleryGrid) return;
            
            const newId = 'gallery' + Date.now();
            const galleryItem = document.createElement('div');
            galleryItem.className = 'gallery-item image-editable';
            galleryItem.setAttribute('data-id', newId);
            
            galleryItem.innerHTML = `
                <img src="${imageSrc}" alt="${altText || 'Image'}">
                <button class="image-edit-btn" onclick="editImage('${newId}')">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="add-item-btn" onclick="showImageUploadModal()" title="${currentLanguage === 'ar' ? 'إضافة صورة' : 'Ajouter une image'}">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="remove-item-btn" onclick="removeGalleryItem('${newId}')" title="${currentLanguage === 'ar' ? 'حذف هذه الصورة' : 'Supprimer cette image'}">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            galleryGrid.appendChild(galleryItem);
        }

        function addVideoItem(videoSrc, altText) {
            const videoContainer = document.getElementById('videoContainer');
            if (!videoContainer) return;
            
            const videoItem = document.createElement('div');
            videoItem.className = 'video-item';
            
            videoItem.innerHTML = `
                <div class="youtube-embed">
                    <video controls style="width:100%; height:100%;">
                        <source src="${videoSrc}" type="video/mp4">
                        ${currentLanguage === 'ar' ? 'متصفحك لا يدعم تشغيل الفيديو' : 'Votre navigateur ne supporte pas la lecture de vidéos.'}
                    </video>
                </div>
                <button class="add-item-btn" onclick="showVideoUploadModal()" title="${currentLanguage === 'ar' ? 'إضافة فيديو' : 'Ajouter une vidéo'}">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="remove-item-btn" onclick="removeVideoItem(this)" title="${currentLanguage === 'ar' ? 'حذف هذا الفيديو' : 'Supprimer cette vidéo'}">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            videoContainer.appendChild(videoItem);
        }
    </script>
</body>
</html>
